---
title: MedObras
---

import { Step, Steps } from 'fumadocs-ui/components/steps';


## Observações sobre o código
<Steps>
    <Step>
        O código possui muitos comentários (principalmente de IA).
    </Step>
    <Step>
        Os controllers também realizam alterações no banco de dados.
    </Step>
    <Step>
        O código do frontend é duplicado várias vezes, em diversas páginas.
    </Step>
    <Step>
        O código possui vários sinais de uso de IA, como nos seguintes exemplos:

        ```ts title="backend/src/controllers/passwordController.js"
        // ✅ Modo Acadêmico: sempre retorna o link gerado ao cliente
        const respostaPadrao = {
          success: true,
          message: "Link gerado (Modo Teste)",
          resetLink: null,
        };
        ```

        ```ts title="frontend/src/pages/esqueciSenha.jsx"
        if (res.data.resetLink) {
          console.log("Link de recuperação:", res.data.resetLink);
          // Pequeno delay para permitir leitura do Toast antes de redirecionar (se for o caso)
          // Mas como é fluxo de "enviar email", o usuário ficaria na tela ou iria para login.
          // Vou redirecionar para o link apenas se for desenvolvimento explícito, mas como não sei env, vou apenas logar.
          // Para facilitar o teste do usuário (já que ele pediu para remover a simulação visual),
          // vou assumir que ele vai olhar o console ou o backend.
          // Porem, se eu redirecionar automaticamente, fica "mágico".
          setTimeout(() => {
              window.location.href = res.data.resetLink;
          }, 2000); // Redireciona automagicamente para facilitar o teste sem o modal
        }
        ```

        ```ts title="frontend/src/pages/clienteEditar.jsx"
        // ----------- Máscara automática de Telefone -----------
        function mascararTelefone(valor) {
          let v = String(valor || "").replace(/\D/g, "");
          v = v.slice(0, 11);
          v = v.replace(/(\d{2})(\d)/, "($1) $2");
          v = v.replace(/(\d{5})(\d)/, "$1-$2");
          return v;
        }
        // ----------- VALIDAÇÃO REAL DE CPF -----------
        ```

        ```ts title="frontend/src/pages/editarMedicao.jsx"
        // ✅ carregar produtosSelecionados do JSON (se existir)
        if (Array.isArray(med.produtosSelecionados))
        ```

        ```ts title="backend/src/controllers/empresaController.js"
          //  buscar pelo cnpj limpo (porque você salva limpo)
        ```

        ```ts title="backend/src/routes/produtoRoutes.js"
        import { Router } from "express";
        import auth from "../middlewares/authMiddleware.js";
        import {
          listarProdutos,
          buscarProduto,      // ✅
          criarProduto,
          atualizarProduto,   // ✅
          excluirProduto,
        } from "../controllers/produtoController.js";

        const router = Router();

        router.get("/", auth, listarProdutos);
        router.get("/:id", auth, buscarProduto);         // ✅ precisa pro editar
        router.post("/", auth, criarProduto);
        router.put("/:id", auth, atualizarProduto);      // ✅ precisa pra salvar edição
        router.delete("/:id", auth, excluirProduto);

        export default router;
        ```

        ```ts title="frontend/src/pages/produtoNovo.jsx"
        // ✅ só envia se você preencher
        if (descricao.trim()) payload.descricao = descricao.trim();
        if (valorM2 !== "" && Number(valorM2) >= 0) payload.valorM2 = Number(valorM2);
        ```
    </Step>
</Steps>
